<div class="search-bar">
</div>


<ul id='marker-list'></ul>
<script>
L.mapbox.accessToken = 'pk.eyJ1IjoidHNjaGFlZmZlcjc1MDQiLCJhIjoibGtEVEpDTSJ9.Ii90udJG3hfV3ftGYafKLQ';
var map = L.mapbox.map('map', 'tschaeffer7504.mbaooln6').setView([38.899, -77.015], 12);
var myLayer = L.mapbox.featureLayer().addTo(map);

var features = [];

<% @restaurants.each do |restaurant| %>
features.push({
  id: 'restaurant.id',
  type: 'Feature',
  geometry: {
    type: 'Point',
    coordinates: [<%=restaurant.longitude.to_f%>,<%= restaurant.latitude.to_f %>]
    },
  properties: {
    title: '<%= restaurant.name %>',
    description: '<%= restaurant.address %>',
    'marker-color': '#000',
    'marker-symbol': 'star-stroked',
    }
});

<% end %>

myLayer.setGeoJSON({
    type: 'FeatureCollection',
    features: features
});


</script>